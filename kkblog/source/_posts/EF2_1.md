---
title: Effective Java 读书笔记（2.1）
date: 2017-06-24 22:13:24
tags: [Effective java, java, 读书笔记]
categories: [Java]
---

第二章 创建和销毁对象

**第1条 用静态工厂方法代替构造器**

### 优点

①相比构造器而言，有名称。

* a.一些构造器的参数没有办法描述返回的对象类型，使用这个方法，**可以更清晰地体现出返回对象的类型。**

* b.方法签名：指方法的参数个数、参数列表和返回值。

那么对于一个给定的签名，只能构造一个构造器。要避开这个限制，程序员一般会改变参数列表的顺序来**达到构成多个构造器（含有相同签名）的目的**。但这样用户常常记不清到底使用哪个API。
但是**如果使用静态工厂方法，由于有名称**，可以很好的解决这个问题。

②不必再每次调用它们的时候创建一个新对象

③可以返回原返回类型的任意子对象

这种灵活的静态工厂方法，构成了服务基础框架：

以JDBC为例：

* 1）服务接口 ，Connection就是它的服务接口

* 2）提供者注册API，系统用来注册实现，让客户端访问服务的，DriverManager.registerDriver

* 3）服务访问API，DriverManager.get Connection

* 4）可选接口，服务提供者接口，这些提供者负责创建其服务实现的实例。如果没有这个接口，实现就按照类名称注册，并通过反射方式实例化。Driver

④创建参数化类型实例的时候，他们使代码变得更加简洁

比如这种，参数越长，代码越复杂

![clipboard.png](http://ovwunej09.bkt.clouddn.com/EF1.png)

但如果提供了静态工厂方法：

![clipboard.png](http://ovwunej09.bkt.clouddn.com/EF02.png)

使用时：

![clipboard.png](http://ovwunej09.bkt.clouddn.com/EF03.png)

### 缺点：

①类如果不含public或者protected的构造器，就不能被子类化（也就是不能继承）；

②他们实际上与其他静态方法没有任何区别（服气了.....

由于API文档中没有明确标识出来，所以如果一个类只有静态工厂方法而没有构造器，那么想实例化它会比较困难。
